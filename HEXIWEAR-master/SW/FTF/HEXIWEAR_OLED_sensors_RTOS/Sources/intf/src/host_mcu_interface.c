/************************************************************************************
*************************************************************************************
* Include
*************************************************************************************
************************************************************************************/
#include <stdint.h>
#include <stddef.h>
#include "board.h"
#include "fsl_os_abstraction.h"
#include "fsl_interrupt_manager.h"

#include "host_mcu_interface.h"
#include "fsl_uart_driver.h"
#include "error.h"

#include "HEXIWEAR_info.h"

/************************************************************************************
*************************************************************************************
* Private memory declarations
*************************************************************************************
************************************************************************************/

/*! *********************************************************************************
*************************************************************************************
* Private prototypes
*************************************************************************************
********************************************************************************** */

/*! *********************************************************************************
*************************************************************************************
* Functions definitions
*************************************************************************************
********************************************************************************** */

/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/**
 *    Initialize module.
 *
 *    @return                          kStatus_OSA_Success  Successfully created tasks and  message queues.
 *                                     kStatus_OSA_Error    Initialization fail.
 */

osa_status_t HostInterface_Init()
{
  osa_status_t
    status = kStatus_OSA_Success;

  /**
   * set the interrupt priority level
   */
  NVIC_SetPriority( gHostInterface_irqn, gHostInterfaceIRQPriority_c );

#if defined( HEXIWEAR_DEBUG )
  NVIC_SetPriority( HEXIWEAR_DEBUG_UART_IRQn , HEXIWEAR_DEBUG_UART_IRQ_PRIO );
#endif

  status |= HostInterface_EventsInit();
  status |= HostInterface_TxInit();
  status |= HostInterface_RxInit();

  if ( kStatus_OSA_Success != status )
  {
    catch(3);
  }

  return kStatus_OSA_Success;
}
